function CharacterSelect(a)local b=a.player;function character_select_controller()local c=a.player.rider;local d=min(#RIDERS,c+1)local e=max(1,c-1)pause_suppress()if btnp(0)then a.player.rider=e;sfx(60)elseif btnp(1)then a.player.rider=d;sfx(60)end;if btnp(4)or btnp(5)or btnp(6)then a.screen=GetReady(a)sfx(59)end end;function character_select_view()local c=a.player.rider;if a.konami==true then RIDERS=PRIDERS;a.daytime=false elseif a.konami==false then RIDERS=KRIDERS end;printc("select your character",20,20,7)for f=1,#RIDERS do local g=5+(f-1)*22;local h=40;if f==c then rect(g-2,h-2,g+10,h+10,7)end;spr(RIDERS[f].sprite,g,h)end;printc(RIDERS[c].name,50,65,7)printc("press left or right",20,90,7)printc("then start to confirm",30,100,7)end;return{view=character_select_view,controller=character_select_controller}end