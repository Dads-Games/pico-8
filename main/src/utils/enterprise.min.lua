function BlinkingPixel(a,b,c,d)a=a or 7;b=b or 0;c=c or 30;d=d or 30;endless=endless or true;local e=0;local f={}function f:update()e=e+1;if e>1000 then e=0 end end;function f:draw(g,h)local i=a;local j=c;if e%(c+d)>c then i=b;j=d end;pset(g,h,i)end;return f end;function WarpDriveTrail()local k={}local l={{color=8,percent=0.1},{color=11,percent=0.3},{color=12,percent=0.6},{color=9,percent=0.9}}local m={}function k:Particle(g,h)local n=rnd(0.25)+0.5;return{x=g,y=h,speed=rnd(0.075)+0.25,life=n,starting_life=n}end;function k:update(g,h)for o in all(m)do o.life=o.life-rnd(0.1)o.x=o.x+o.speed;if o.life<=0 then del(m,o)add(m,k:Particle(g,h))end end end;function k:draw()for p,o in pairs(m)do local q=1-o.life/o.starting_life;local r=1;for p=1,#l do if q<l[p].percent then r=p;break end end;color_based_on_percent=l[r].color;local g=o.x;local h=o.y+flr(rnd((1-q)*3)-1)if h<o.y or h>o.y then g=g+1+rnd(3)end;pset(g,h,color_based_on_percent)end end;for p=1,550 do add(m,k:Particle(-30,-30))end;return k end;function Enterprise(s)local s=s or 100;local t={position={x=-100,y=50}}local u=false;local v=BlinkingPixel(7,14,5,30)local w=WarpDriveTrail()local x=nil;local y={x=function(z)return t.position.x+z end,y=function(A)return t.position.y+A end}function controller()t.position.x=t.position.x-5;if x~=nil then x=x+1 end;if u and t.position.x<-64 then t.position.x=200;u=false end;v:update()w:update(y.x(30),y.y(4))end;function view()local B=120%16*8;local C=flr(120/16)*8;sspr(B,C,32,14,y.x(0),y.y(0))v:draw(y.x(14),y.y(4))w:draw()end;function tryToTrigger()if x==nil or x>s then u=true;x=0 end end;return{view=view,controller=controller,trigger=tryToTrigger}end